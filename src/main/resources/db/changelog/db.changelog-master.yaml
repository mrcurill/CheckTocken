databaseChangeLog:
- changeSet:
    id: 1
    author: testdb
    changes:
    - createTable:
        tableName: user
        columns:
        - column:
            name: id
            type: BIGINT
            autoIncrement: true
            constraints:
              primaryKey: true
              nullable: false
        - column:
            name: login
            type: varchar(50)
            constraints:
              unique: true
              nullable: false
        - column:
            name: password
            type: varchar(512)
            constraints:
              nullable: false
        - column:
            name: product_id
            type: BIGINT

- changeSet:
    id: 2
    author: testdb
    comment: "Create admin user"
    changes:
    - insert:
        tableName: user
        columns:
        - column:
            name: login
            value: "admin"
        - column:
            name: password
            value: "admin"
        - column:
            name: product_id
            value: 1
    - insert:
        tableName: user
        columns:
        - column:
            name: login
            value: "guest"
        - column:
            name: password
            value: "guest"
        - column:
            name: product_id
            value: 2
    rollback:
    - delete:
        tableName: user
        where: login in ('admin', 'guest')

- changeSet:
      id: 3
      author: testdb
      changes:
      - createTable:
            tableName: product
            columns:
            - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                      primaryKey: true
                      nullable: false
            - column:
                  name: name
                  type: varchar(50)
                  constraints:
                      unique: true
                      nullable: false
            - column:
                  name: desc
                  type: varchar(512)
            - column:
                  name: expire
                  type: DATE

- changeSet:
      id: 4
      author: testdb
      comment: "Create Product"
      changes:
      - insert:
            tableName: product
            columns:
            - column:
                  name: name
                  value: "product1"
            - column:
                  name: desc
                  value: "desc1"
            - column:
                  name: expire
                  value: '2022-12-12'
      - insert:
            tableName: product
            columns:
            - column:
                  name: name
                  value: "product2"
            - column:
                  name: desc
                  value: "desc2"
            - column:
                  name: expire
                  value: '2028-01-01'
      rollback:
      - delete:
            tableName: product
            where: id in (1,2)

- changeSet:
      id: 5
      author: testdb
      changes:
      - createTable:
            tableName: product_item
            columns:
            - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                      primaryKey: true
                      nullable: false
            - column:
                  name: name
                  type: varchar(50)
                  constraints:
                      unique: true
                      nullable: false
            - column:
                  name: desc
                  type: varchar(512)
            - column:
                  name: cost
                  type: INT
            - column:
                  name: product_id
                  type: BIGINT

- changeSet:
      id: 6
      author: testdb
      comment: "Create Product Item"
      changes:
      - insert:
            tableName: product_item
            columns:
            - column:
                  name: name
                  value: "item1"
            - column:
                  name: desc
                  value: "desc1"
            - column:
                  name: cost
                  value: 100
            - column:
                  name: product_id
                  value: 1
      - insert:
            tableName: product_item
            columns:
            - column:
                  name: name
                  value: "item2"
            - column:
                  name: desc
                  value: "desc2"
            - column:
                  name: cost
                  value: 200
            - column:
                  name: product_id
                  value: 1
      - insert:
            tableName: product_item
            columns:
            - column:
                  name: name
                  value: "item3"
            - column:
                  name: desc
                  value: "desc3"
            - column:
                  name: cost
                  value: 300
            - column:
                  name: product_id
                  value: 1
      - insert:
            tableName: product_item
            columns:
            - column:
                  name: name
                  value: "item4"
            - column:
                  name: desc
                  value: "desc4"
            - column:
                  name: cost
                  value: 400
            - column:
                  name: product_id
                  value: 2
      - insert:
            tableName: product_item
            columns:
            - column:
                  name: name
                  value: "item5"
            - column:
                  name: desc
                  value: "desc5"
            - column:
                  name: cost
                  value: 500
            - column:
                  name: product_id
                  value: 2
      rollback:
      - delete:
            tableName: product_item
            where: id in (1,2,3,4,5)